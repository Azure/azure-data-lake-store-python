sudo: false

language: python

cache: pip

matrix:
  include:
    - python: 2.7
    - python: 3.3
    - python: 3.4
    - python: 3.5
    - python: 3.6

install:
  # Install dependencies
  - pip install -U setuptools pip
  - pip install -r dev_requirements.txt
  - python setup.py develop

  # Install coveralls and pytest coverage
  - pip install coveralls pytest-cov

env:
  - azure_data_lake_store_name="chdevalaus2"
  - azure_subscription_id="9e1f0ab2-2f85-49de-9677-9da6f829b914"
  - azure_resource_group_name="cosmosadmin"
  - azure_service_principal_secret='MbFXo5YJjSje1KUU7xVNYmdXnW+6mnqQoZ0aAxv15Kc='
  - azure_service_principal='2945c57f-a9a0-4700-93d0-94bc78bec18b'
  - azure_tenant_id='72f988bf-86f1-41af-91ab-2d7cd011db47'
  - RECORD_MODE='all'


script:
  - py.test -x -vvv --doctest-modules --cov=azure/datalake/store --pyargs azure.datalake.store tests

after_success:
  - coveralls

notifications:
  email: false

deploy:
  provider: pypi
  user: begoldsm
  skip_upload_docs: true
  # password: use $PYPI_PASSWORD
  distributions: "sdist bdist_wheel"
  on:
    tags: true
    python: '3.6'
    repo: Azure/azure-data-lake-store-python
